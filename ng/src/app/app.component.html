<div *ngIf="!hasUrlParams" class="alert alert-danger" role="alert">
  ERROR: Check URL parameters
</div>

<div *ngIf="hasUrlParams" class="container">

  <div class="row mb-2">
    <div class="col-12 mt-3">
      <!-- Header -->
      <h2>Let's auto-install some popular apps (live)</h2>
      <p class="mb-3">Don't worry: if you don't like one, you can remove it later without side-effects :)
        Our best pick for you is: Auto install apps for 2sxc 12.05</p>
      <!-- Download Button -->
      <button [disabled]="(selectedApps | async).length == 0" type="button" class="btn btn-primary mb-3"
        (click)="installApps()">
        <span>Install selected {{(selectedApps | async).length}} apps</span>
      </button>
      <p>In case you're wondering, we'll install the following apps:</p>
    </div>
<div class=" d-flex justify-content-start mb-2 col-md-3" >
    <input (ngModelChange)="search($event)" [ngModel]="searchValue" type="search" placeholder="Search..">
    </div>
  </div>


  <!-- toogle view -->
  <div class="d-flex justify-content-between mb-3 ">

    <div class="mb-3">
      <button type="button" class="btn btn-secondary me-2" (click)="toggleSelection(false)">Unselect All</button>

      <button type="button" class="btn btn-secondary ms-2" (click)="toggleSelection(true)">Select All</button>
    </div>
    <div>
      <mat-icon *ngIf="!isTilesView"  (click)="toggleView()" class="me-3">grid_on</mat-icon>
      <mat-icon *ngIf="isTilesView" (click)="toggleView()" class="me-3">list</mat-icon>
    </div>
  </div>

  <div *ngIf="(apps$ | async).length == 0" class="alert alert-danger" role="alert">
    ERROR:
    There is no app for this version
  </div>

  <div class="row mb-2 ">
    <!-- Alle Apps -->
    <!-- ngClass für tile und list ansicht true gilt für beide -->
    <div *ngFor="let app of apps$ | async"
      [ngClass]="{'col-md-4 col-lg-3': isTilesView, 'col-12': !isTilesView, 'app-card mb-3 ': true}">
      <!-- Source -->
      <div  [ngClass]="{'h-100 card-grid': isTilesView, ' card-list': !isTilesView, 'card bg-light': true}" >
        <div [ngClass]="{'row': isTilesView, ' d-flex align-items-center': !isTilesView, 'position-relative': true}">
          <div [ngClass]="{'col-md-4': isTilesView, 'col-2 imgDiv': !isTilesView, 'd-flex align-items-center ': true}">
            <img src="https://2sxc.org/{{app.icon}}?w=400" class="img-fluid rounded-start align-items-center wh-c"
              alt="...">
          </div>
          <div class="col-md-8 tt">
            <div [ngClass]="{'': isTilesView, 'p-1 ps-3': !isTilesView, 'card-body h-100 ': true}"         >
              <h5 [ngClass]="{'fs-6': isTilesView, 'fs-5': !isTilesView, 'card-title mb-1': true}"><a target="_blank"
                  href="https://2sxc.org/apps/app/{{app.urlKey}}">{{app.displayName}}</a></h5>
              <div class="card-text">
                <small><a class="version-link" href="{{app.gitHub}}" target="_blank">(package
                    {{app.version}})</a></small>
                <!-- <p [ngClass]="{'d-none': isTilesView, 'd-flex': !isTilesView, 'mt-4': true}">{{app.shortDescription}}
                </p> -->
                <input [ngClass]="{'checkbox-item': isTilesView, 'checkbox-item-list': !isTilesView}" type="checkbox" (click)="changeValue(app, app.urlKey)"
                  [(ngModel)]="app.isSelected" [(value)]="app.urlKey">
              </div>
              <a href="https://2sxc.org/apps/app/{{app.urlKey}}" target="_blank" class="stretched-link"></a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- button select or unselect -->
  <div class="row">

    <p>This dialog will disappear when you've added or created your first app. It will appear again on every new portal,
      as the apps are per portal. If you want to add more apps later on, just get them from the <a
        href="https://2sxc.org/apps" target="_blank">app
        catalog</a></p>
  </div>
</div>
